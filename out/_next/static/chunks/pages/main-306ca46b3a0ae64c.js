(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[671],{575:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/main",function(){return s(5930)}])},8339:function(e,t){"use strict";let s=e=>{let t=new Date,s=new Date(e),n=Math.floor((t.getTime()-s.getTime())/1e3/60);if(n<1)return"방금전";if(n<60)return"".concat(n,"분전");let a=Math.floor(n/60);if(a<24)return"".concat(a,"시간전");let c=Math.floor(n/60/24);return c<365?"".concat(c,"일전"):"".concat(Math.floor(c/365),"년전")};t.Z=s},778:function(e,t,s){"use strict";var n=s(1768),a=s(902);let c=e=>{let t=e.user,s=e.props.data;if(t.loggin&&null===s)return alert("세션이 만료되었습니다. 다시 로그인 후 시도해 주세요"),new Promise((e,t)=>{e("logout")});if(!t.loggin||null===s)return new Promise((e,t)=>{e("notUser")});{console.log("login");let c=s.data.access_token,i=s.data.refresh_token,l=new Date;return l.setMinutes(l.getMinutes()+3),n.ZP.save("accessToken",c,{httpOnly:a.w,path:"/",expires:l}),n.ZP.save("refreshToken",i,{httpOnly:a.w,path:"/"}),new Promise((e,t)=>{e("login")})}};t.Z=c},902:function(e,t,s){"use strict";s.d(t,{w:function(){return c}});let n=s(6626),a=n.production;a.BACKEND_URL;let c=a.HTTP_ONLY},5930:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return j}});var n=s(5893),a=s(7294),c=s(1163),i=s(4480),l=s(8528),r=s(6223),o=s(9611),u=s(1255),d=s(5429);s(6689);var f=s(5675),m=s.n(f),p=s(594),h=s(778),g=s(8339),x=s(3412),N=s(2242);function j(e){let t=(0,i.rb)(x.KL);(0,i.sJ)(x.DI);let s=(0,i.sJ)(x.KL),f=(0,c.useRouter)(),[j,I]=(0,a.useState)([]),[_,w]=(0,i.FV)(x.zK),[T,v]=(0,a.useState)(0);return(0,a.useEffect)(()=>{(0,h.Z)({user:s,props:e}).then(e=>{"logout"===e&&(t(),f.push("/user/signin"))})},[]),(0,a.useEffect)(()=>{async function e(){let e=await p.Z.get("/post/all",{params:{page:_}});e.data.success?(v(e.data.data.postCount),I(e.data.data.posts)):alert("잠시 후 다시 접속해주세요")}f.push("/main?page=".concat(_));try{e()}catch(t){console.log(t),alert("잠시 후 다시 접속해주세요")}},[_]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"getPost",children:[(0,n.jsx)(N.default,{}),(0,n.jsx)("div",{className:"getPostsBox_wrap",children:j.map(e=>(0,n.jsxs)("div",{className:"getPostsBox",onClick:()=>f.push("/post/".concat(e.id)),children:[(0,g.Z)(e.createTime).indexOf("방금전")>0||(0,g.Z)(e.createTime).indexOf("분전")>0||(0,g.Z)(e.createTime).indexOf("시간전")>0?(0,n.jsx)("p",{className:"NewPosts",children:"NEW"}):null,(0,n.jsxs)("div",{className:"mainInfo",children:[(0,n.jsxs)("div",{className:"mainInfoText",children:[(0,n.jsx)("p",{className:"mainInfoTitle",children:e.title}),(0,n.jsx)("p",{className:"mainInfoContents",children:e.content})]}),null!==e.image.firstImageUrl?(0,n.jsxs)("div",{className:"ImageInfo",children:[(0,n.jsx)(m(),{src:e.image.firstImageUrl,width:100,height:100,alt:"postImage"}),e.image.totalImagesCount>1?(0,n.jsx)("p",{className:"totalImagesCount",children:"+".concat(e.image.totalImagesCount-1)}):null]}):null]}),(0,n.jsxs)("div",{className:"addInfo",children:[(0,n.jsx)("p",{className:"addInfoWriter",children:e.writer}),(0,n.jsxs)("div",{className:"addInfo_wrap",children:[(0,n.jsxs)("p",{children:[(0,n.jsx)(r.Z,{className:"addInfoIcons"}),(0,g.Z)(e.createTime)]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(o.Z,{className:"addInfoIcons"})," ",e.view]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(u.Z,{className:"addInfoIcons"})," ",e.comments]}),(0,n.jsxs)("p",{children:[(0,n.jsx)(d.Z,{className:"addInfoIcons"})," ",e.likes]})]})]})]},e.id))})]}),(0,n.jsx)("div",{className:"pagination",children:(0,n.jsx)(l.Z,{current:_,onChange:e=>w(e),total:T})})]})}},2242:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var n=s(5893),a=s(7294),c=s(594);function i(){let[e,t]=(0,a.useState)([]);return(0,a.useEffect)(()=>{async function e(){let e=await c.Z.get("/post/popular");e.data.success?t(e.data.data):alert("잠시 후 다시 접속해주세요")}try{e()}catch(s){console.log(s),alert("잠시 후 다시 접속해주세요")}},[]),(0,n.jsxs)("div",{className:"ranking",children:[(0,n.jsx)("p",{className:"rankingTitle",children:"실시간 인기글"}),e.map((e,t)=>(0,n.jsxs)("div",{className:"rankingContents",children:[(0,n.jsx)("p",{className:"index",children:t+1}),(0,n.jsx)("p",{className:"title",children:e.title})]},e.id))]})}},3412:function(e,t,s){"use strict";s.d(t,{DI:function(){return l},KL:function(){return i},zK:function(){return r}});var n=s(4480),a=s(6983);let{persistAtom:c}=(0,a.J)(),i=(0,n.cn)({key:"userState",default:{name:null,loggin:!1,emailAuth:!1},effects_UNSTABLE:[c]}),l=(0,n.cn)({key:"keywordState",default:{posts:null,postCount:0},effects_UNSTABLE:[c]}),r=(0,n.cn)({key:"pageState",default:1,effects_UNSTABLE:[c]})},6626:function(e){"use strict";e.exports=JSON.parse('{"development":{"BACKEND_URL":"http://43.201.144.113:8080","HTTP_ONLY":false},"production":{"BACKEND_URL":"","HTTP_ONLY":true}}')}},function(e){e.O(0,[236,675,492,761,358,63,774,888,179],function(){return e(e.s=575)}),_N_E=e.O()}]);